<HomeScreenView>:

    CStackLayout:
        size_hint: 1, 1
        spacing: dp(16)
        padding: dp(16)

        CBoxLayout:
            adaptive: [False, True]
            spacing: dp(8)

            AsyncImage:
                source: "assets/images/kvdeveloper_logo64.png"
                size_hint: None, None
                size: dp(32), dp(32)
                pos_hint: {'center_y': 0.5}

            CLabel:
                text: "KvDeveloper Client"
                style: "heading_03"
                pos_hint: {'center_y': 0.5}

            CButtonGhost:
                icon: "package"
                role: "Large Productive"
                on_press:
                    app.referrer("installer screen")

            CButtonGhost:
                icon: "settings"
                role: "Large Productive"

        CRelativeLayout:

            AsyncImage:
                source: "assets/images/magicpattern.jpg"
                size_hint: [1, 1]
                fit_mode: "cover"

            ScrollView:
                canvas.before:
                    Color:
                        rgba: [1, 1, 1, 0.8]
                    Rectangle:
                        pos: self.pos
                        size: self.size

                MainLayout:
                    id: MainLayout
                    screen: root
                    orientation: 'vertical'
                    adaptive: [False, True]
                    padding: dp(16)
                    spacing: dp(16)

<MainLayout@CBoxLayout>:
    screen: None

    CBoxLayout:
        adaptive: [False, True]
        spacing: dp(8)

        CIcon:
            icon: "development"
            pos_hint: {'center_y': 0.5}

        CLabel:
            text: "Development servers"
            pos_hint: {'center_y': 0.5}
        
        CButtonGhost:
            icon: "help"
            role: "Large Productive"
            on_press:
                root.screen.notify_info()

    CDivider:

    CBoxLayout:
        orientation: "vertical"
        spacing: dp(48)
        padding: [0, dp(32), 0, dp(16)]
        adaptive: [False, True]

        CTextInputLayout:
            bg_color: app.transparent
            hover_enabled: False
            CTextInputLabel:
                text: "Server Url"
            CTextInput:
                id: ServerUrlEntry
                hint_text: "Enter server url"
            CTextInputHelperText:
                text: "http://ip_address:port"

        CButtonPrimary:
            text: "Connect"
            icon: "connect"
            role: "Large Productive"
            on_press:
                root.screen.launch(ServerUrlEntry.text)

    CDivider:

    CButtonGhost:
        text: "Scan QR code"
        icon: "qr-code"
        role: "Large Productive"
        on_release: app.start_scan()

    CLink:
        url: "https://github.com/Novfensec/KvDeveloper-Client"
        external: True
        cstate: "visited"

        CLinkText:
            text: "Github repository"

        CLinkIcon:
            icon: "arrow--up-right"

    CDivider:

    CBoxLayout:
        adaptive: [False, True]
        spacing: dp(8)

        CIcon:
            icon: "application"
            pos_hint: {'center_y': 0.5}

        CLabel:
            text: "Recent servers"
            pos_hint: {'center_y': 0.5}

        CButtonDanger:
            icon: "trash-can"
            role: "Large Productive"
            variant: "Ghost"
            on_press:
                app.clean_apps()

    CGridLayout:
        id: ServersList
        cols: 1
        max_cols: 4
        min_cols: 1
        spacing: dp(16)
        responsive: True
        adaptive: [False, True]


<ServerTile>:
    orientation: "vertical"
    adaptive: [False, True]
    padding: dp(16)
    spacing: dp(16)
    bg_color: app.background_selected_hover

    CLabel:
        text: root.name

    UIShellButton:
        icon: "play"
        on_press:
            root.launch(root.name)

